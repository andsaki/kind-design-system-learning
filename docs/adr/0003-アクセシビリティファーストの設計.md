# 0003. アクセシビリティファーストの設計

日付: 2025-12-02

## ステータス

承認済み

## コンテキスト

このプロジェクトは、アクセシビリティを学ぶための教育用デザインシステムです。そのため、単にアクセシビリティ機能を「追加」するのではなく、設計の中心に置く必要がありました。

### 課題

- 多くのプロジェクトでは、アクセシビリティが後付けで対応される
- アクセシビリティ機能が optional なpropsとして実装されがち
- WCAGレベル（A/AA/AAA）の違いが明示的でない
- アクセシビリティのベストプラクティスを学びにくい

### 設計原則の必要性

アクセシビリティを設計の中心に置くための原則と実装パターンが必要でした。

## 決定

アクセシビリティファーストの設計原則を採用し、以下を実装する：

1. **WCAGレベルの明示的な指定**
   - 全コンポーネントに`wcagLevel`プロパティを必須化
   - デフォルト値は'AA'

2. **必須のアクセシビリティプロパティ**
   - `label`プロパティを必須化（ラベルなしのフォーム要素を防止）
   - ARIA属性の適切な使用を型レベルで強制

3. **教育的な実装例**
   - 各機能に「正しい使い方」と「間違った使い方」の両方を示す
   - スクリーンリーダーのシミュレーション機能
   - アクセシビリティ違反を自動検出（Axe）

4. **デザイントークンへの統合**
   - WCAGレベルに応じたカラーコントラスト比を保証
   - テキストサイズ、スペーシングの最小値を設定

## 結果

### ポジティブな影響

- **開発者の意識向上**: アクセシビリティを考えずにコンポーネントを作成できない設計

- **教育効果**: 実際に動作する実装例とスクリーンリーダーシミュレーションで学習効果が高い

- **品質保証**: 型システムとAxeによる自動テストで、アクセシビリティ違反を防止

- **一貫性**: 全コンポーネントが同じアクセシビリティ基準に従う

- **スケーラビリティ**: 新しいコンポーネントを追加する際、自然とアクセシビリティが考慮される

### 実装例

```typescript
// Button.tsx
export interface ButtonProps {
  label: string; // 必須
  'aria-label'?: string;
  'aria-describedby'?: string;
  wcagLevel?: WCAGLevel; // デフォルト: 'AA'
}

// Input.tsx
export interface InputProps {
  label: string; // 必須 - ラベルなしのinputは作成できない
  error?: string;
  helperText?: string;
  wcagLevel?: WCAGLevel;
}

// デザイントークン
export const colorTokens = {
  text: {
    primary: {
      AA: '#1a1a1a', // コントラスト比 7:1
      AAA: '#000000', // コントラスト比 21:1
    },
  },
};
```

### ネガティブな影響

- **開発の制約**: 一部の開発者にとって、制約が強すぎると感じる可能性

- **学習コスト**: WCAGレベル、ARIA属性などの概念を理解する必要

- **コード量の増加**: アクセシビリティ機能の実装により、コンポーネントのコード量が増える

### トレードオフ

- **開発の自由度を犠牲にして、アクセシビリティ品質を獲得**
- **初期開発コストを犠牲にして、長期的な保守性と教育効果を獲得**

## 参考資料

- [WCAG 2.1 ガイドライン](https://www.w3.org/WAI/WCAG21/quickref/)
- [WAI-ARIA Authoring Practices](https://www.w3.org/WAI/ARIA/apg/)
- [Inclusive Components](https://inclusive-components.design/)
- [A11y Project Checklist](https://www.a11yproject.com/checklist/)
