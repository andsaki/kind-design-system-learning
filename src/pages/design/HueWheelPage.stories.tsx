import type { Meta, StoryObj } from '@storybook/react';
import { HueWheelPage } from './HueWheelPage';

/**
 * 色相環インタラクティブデモページ
 *
 * 色相環を使った配色パターンの学習とコントラスト比の計算ができるページです。
 * HSL色空間、カラーハーモニー、WCAGコントラスト基準について実際に操作しながら学べます。
 */
const meta = {
  title: 'Pages/Design/HueWheelPage',
  component: HueWheelPage,
  parameters: {
    layout: 'fullscreen',
    a11y: {
      config: {
        rules: [
          {
            id: 'color-contrast',
            enabled: true,
          },
          {
            id: 'region',
            enabled: true,
          },
        ],
      },
    },
    docs: {
      description: {
        component: `色相環インタラクティブデモページ

このページでは、以下の機能を提供します：

## 主な機能

### 1. 色相環（Hue Wheel）
- インタラクティブな色相環でドラッグ操作による色相選択
- 彩度（Saturation）と明度（Lightness）のスライダー調整
- HSL、RGB、HEX形式での色コード表示

### 2. 配色パターン（Color Harmony）
- **補色（Complementary）**: 色相環の正反対の色で強いコントラスト
- **類似色（Analogous）**: 隣接する色で調和の取れた配色
- **三分割配色（Triadic）**: 120度間隔でバランスの取れた配色

### 3. コントラスト計算ツール
- 前景色と背景色の色相・明度を独立して調整
- リアルタイムでWCAG準拠のコントラスト比を計算
- AA/AAAレベルの達成状況を表示
- カラーピッカーでの直接色選択にも対応

## アクセシビリティへの応用
- 補色を使って十分なコントラストを確保
- 類似色を使って視覚的な階層を作成
- 明度の差を考慮したWCAG 4.5:1以上のコントラスト確保
- 色覚特性を考慮した配色選択

## 学習ポイント
- HSL色空間の理解（色相・彩度・明度）
- カラーハーモニーの基礎知識
- WCAGコントラスト基準（AA: 4.5:1、AAA: 7:1）
- 相対輝度とコントラスト比の計算方法`,
      },
    },
  },
  tags: ['autodocs'],
} satisfies Meta<typeof HueWheelPage>;

export default meta;
type Story = StoryObj<typeof meta>;

/**
 * デフォルト表示
 *
 * 色相環デモページの標準表示です。以下のセクションが含まれます：
 *
 * 1. **色相環セクション**: 色相選択と彩度・明度の調整
 * 2. **配色パターンセクション**: 補色、類似色、三分割配色の表示
 * 3. **アクセシビリティへの応用**: 配色選択のガイドライン
 * 4. **コントラスト計算ツール**: WCAG準拠のコントラスト比計算
 */
export const Default: Story = {};

/**
 * 色相環デモ
 *
 * 色相環を使った色選択の基本機能を示します。
 *
 * **使い方:**
 * - 色相環をクリックまたはドラッグして色相を選択
 * - スライダーで彩度と明度を調整
 * - 選択した色のHSL/RGB/HEX値を確認
 *
 * **学習ポイント:**
 * - HSL色空間の3つの要素（色相・彩度・明度）
 * - 色相は0-360度の角度で表現
 * - 彩度0%で無彩色、100%で最も鮮やか
 * - 明度0%で黒、50%で純色、100%で白
 */
export const HueWheelDemo: Story = {
  name: '色相環デモ',
  parameters: {
    docs: {
      description: {
        story: `インタラクティブな色相環を使って、色の選択と調整ができます。

**操作方法:**
1. 色相環の任意の位置をクリック
2. ドラッグして連続的に色相を変更
3. 彩度スライダーで色の鮮やかさを調整
4. 明度スライダーで色の明るさを調整

**表示される情報:**
- 選択した色のプレビュー
- HSL形式の色コード
- RGB形式の色コード
- HEX形式の色コード`,
      },
    },
  },
};

/**
 * カラーハーモニー
 *
 * 選択した色を基準とした配色パターンを表示します。
 *
 * **配色理論:**
 *
 * 1. **補色（Complementary）**
 *    - 色相環で180度反対の位置にある色
 *    - 最も強いコントラストを生み出す
 *    - 目を引く配色、重要な要素の強調に使用
 *
 * 2. **類似色（Analogous）**
 *    - 色相環で±30度隣接する色
 *    - 調和の取れた穏やかな配色
 *    - 視覚的な階層構造の作成に最適
 *
 * 3. **三分割配色（Triadic）**
 *    - 色相環を3等分した位置（120度間隔）
 *    - バランスが取れた活気ある配色
 *    - 多彩で動きのあるデザインに使用
 */
export const ColorHarmony: Story = {
  name: 'カラーハーモニー',
  parameters: {
    docs: {
      description: {
        story: `選択した色を基準に、調和の取れた配色パターンを自動生成します。

**補色の使い方:**
- 重要なボタンやCTAの配色
- 見出しと本文のコントラスト
- アクセントカラーの選定

**類似色の使い方:**
- グラデーション効果
- 背景とコンテンツの配色
- 視覚的な階層の作成

**三分割配色の使い方:**
- ブランドカラーの展開
- インフォグラフィックス
- イラストやアイコンの配色`,
      },
    },
  },
};

/**
 * コントラスト計算ツール
 *
 * 前景色と背景色のコントラスト比を計算し、WCAG基準の達成状況を確認できます。
 *
 * **WCAG準拠レベル:**
 *
 * - **AAA（7:1以上）**: 最高レベル、すべてのユーザーに推奨
 * - **AA（4.5:1以上）**: 標準テキスト、多くのWebサイトで必須
 * - **AA Large（3:1以上）**: 大きい文字（18pt以上）やUI要素
 *
 * **計算式:**
 * ```
 * コントラスト比 = (Lmax + 0.05) / (Lmin + 0.05)
 * ```
 *
 * L = 相対輝度（0.0〜1.0）、0.2126R + 0.7152G + 0.0722B（ガンマ補正済み）
 */
export const ContrastCalculator: Story = {
  name: 'コントラスト計算ツール',
  parameters: {
    docs: {
      description: {
        story: `前景色（テキスト色）と背景色のコントラスト比をリアルタイムで計算します。

**使い方:**
1. 前景色の色相環で色を選択
2. 背景色の色相環で色を選択
3. それぞれの明度スライダーで調整
4. コントラスト比を確認してWCAG基準に適合しているかチェック

**ポイント:**
- コントラスト比は主に明度の差で決まります
- 色相の違いは視覚的な印象には影響しますが、コントラスト比には直接影響しません
- カラーピッカーで色を直接選択することも可能

**推奨値:**
- 本文テキスト: 4.5:1以上（AA）
- 大きい文字: 3:1以上（AA Large）
- より高い可読性: 7:1以上（AAA）`,
      },
    },
  },
};

/**
 * アクセシビリティ学習
 *
 * 色の選択とコントラストの重要性をインタラクティブに学べます。
 *
 * **学習目標:**
 *
 * 1. **HSL色空間の理解**
 *    - 色相（Hue）: 0-360度で色の種類を表現
 *    - 彩度（Saturation）: 0-100%で色の鮮やかさを表現
 *    - 明度（Lightness）: 0-100%で色の明るさを表現
 *
 * 2. **配色理論の実践**
 *    - 補色でコントラストを確保
 *    - 類似色で視覚的階層を作成
 *    - 三分割配色でバランスを取る
 *
 * 3. **WCAGコントラスト基準**
 *    - AA: 4.5:1（通常テキスト）
 *    - AA: 3:1（大きいテキスト・UI）
 *    - AAA: 7:1（通常テキスト）
 *
 * 4. **色覚特性への配慮**
 *    - 赤と緑の組み合わせを避ける
 *    - 色だけでなく明度の差も確保
 *    - アイコンやパターンで情報を補足
 */
export const AccessibilityLearning: Story = {
  name: 'アクセシビリティ学習',
  parameters: {
    docs: {
      description: {
        story: `色相環とコントラスト計算ツールを使って、アクセシブルな配色を学びます。

**実践例:**

1. **高コントラストな配色を作る**
   - 前景色: 明度15%の濃い色
   - 背景色: 明度95%の明るい色
   - 結果: コントラスト比 12:1以上（AAA達成）

2. **中程度のコントラスト**
   - 前景色: 明度30%
   - 背景色: 明度85%
   - 結果: コントラスト比 5-6:1（AA達成）

3. **低コントラスト（避けるべき）**
   - 前景色: 明度60%
   - 背景色: 明度70%
   - 結果: コントラスト比 2:1未満（不合格）

**ベストプラクティス:**
- テキストには常に4.5:1以上のコントラストを確保
- 大きい文字やUIには3:1以上
- できれば7:1以上を目指す（AAA）
- 色相だけでなく明度の差を重視`,
      },
    },
  },
};
